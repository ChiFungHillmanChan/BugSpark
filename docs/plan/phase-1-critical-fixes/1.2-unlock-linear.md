# 1.2 Unlock Linear Integration

## Priority: HIGH

Linear integration is already fully implemented in the backend (`app/services/linear_integration.py`) and dashboard (`export-to-tracker.tsx`). It is incorrectly marked as "Coming Soon" in the pricing page.

---

## Current State

- Backend: `app/services/linear_integration.py` — fully working, creates issues via GraphQL API
- Dashboard: `src/components/bug-detail/export-to-tracker.tsx` — export button works
- Dashboard: `src/components/settings/linear-integration-form.tsx` — config form works
- Pricing: `src/components/landing/pricing-data.ts` — marked `comingSoon: ["team"]`

## Changes Required

### 1. Update pricing-data.ts

```typescript
// Remove comingSoon from Jira/Linear/Slack comparison feature
// Before:
{
  labelKey: "compJiraLinearSlack",
  values: { free: false, starter: false, team: true },
  comingSoon: ["team"],  // REMOVE THIS LINE
},

// After:
{
  labelKey: "compJiraLinearSlack",
  values: { free: false, starter: false, team: true },
  // Split into separate features for clarity:
},
```

Better approach — split the comparison row into individual integrations:

```typescript
{
  labelKey: "compLinear",
  values: { free: false, starter: false, team: true },
  // No comingSoon — it's live!
},
{
  labelKey: "compJira",
  values: { free: false, starter: false, team: true },
  comingSoon: ["team"],  // Jira is actually coming soon
},
{
  labelKey: "compSlack",
  values: { free: false, starter: false, team: true },
  comingSoon: ["team"],  // Slack is actually coming soon
},
```

### 2. Update i18n messages

Add new translation keys in `packages/dashboard/src/messages/en.json` and `zh-TW.json`:

```json
{
  "compLinear": "Linear Integration",
  "compJira": "Jira Integration",
  "compSlack": "Slack Notifications"
}
```

### 3. Update Team plan highlight

In `pricing-data.ts`, update the Team tier highlights:

```typescript
// Before:
{ key: "pricingTeamHighlightIntegrations", comingSoon: true },

// After — split:
"pricingTeamHighlightLinear",  // No comingSoon wrapper
{ key: "pricingTeamHighlightJira", comingSoon: true },
{ key: "pricingTeamHighlightSlack", comingSoon: true },
```

### 4. Verify `IntegrationResponse.has_token` fix

The known tech debt mentions: `IntegrationResponse.has_token` only checks `token` key (misses Linear's `apiKey`).

In `packages/api/app/schemas/integration.py`, fix:

```python
# Before:
@computed_field
@property
def has_token(self) -> bool:
    return bool(self.config.get("token"))

# After:
@computed_field
@property
def has_token(self) -> bool:
    return bool(self.config.get("token") or self.config.get("apiKey"))
```

## Implementation Steps

1. Fix `has_token` in integration schema
2. Split pricing comparison row into separate integration rows
3. Add i18n keys for new rows
4. Remove `comingSoon` from Linear-specific entries
5. Verify Linear export works end-to-end in dashboard
6. Update any marketing copy that says Linear is "Coming Soon"

## Tests to Verify

- Existing Linear integration tests should still pass
- `has_token` returns `True` for Linear configs with `apiKey`
- Pricing page renders Linear without "Coming Soon" badge
