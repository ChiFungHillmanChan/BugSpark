# 2.5 New Pricing Tier (Pro Plan)

## Priority: MEDIUM

The current jump from Starter (HK$199) to Team (HK$799) is too large. Many 5-15 person teams need more than Starter but cannot justify Team pricing. A Pro tier fills this gap.

---

## Current Pricing

| | Free | Starter HK$199 | Team HK$799 | Enterprise |
|---|---|---|---|---|
| Reports | 50 | 500 | 5,000 | Unlimited |
| Projects | 1 | 3 | 10 | Unlimited |
| Seats | 1 | 3 | 10 | Unlimited |

## Proposed Pricing

| | Free | Starter HK$149 | Pro HK$499 | Team HK$999 | Enterprise |
|---|---|---|---|---|---|
| Reports | 100 | 1,000 | 5,000 | 20,000 | Unlimited |
| Projects | 2 | 5 | 15 | Unlimited | Unlimited |
| Seats | 2 | 5 | 15 | Unlimited | Unlimited |
| Retention | 7d | 30d | 90d | 1yr | Custom |

### Key Changes
1. **Free plan improved** (50→100 reports, 1→2 projects/seats) — more competitive with Jam.dev
2. **Starter reduced** (HK$199→HK$149) — lower barrier to entry
3. **Pro added** (HK$499) — bridge between Starter and Team
4. **Team increased** (HK$799→HK$999) — more features justify higher price
5. **All tiers get more quota** — more generous than before

## Changes Required

### 1. Backend: Add Pro Plan

Update `packages/api/app/models/user.py`:

```python
class Plan(str, Enum):
    FREE = "free"
    STARTER = "starter"
    PRO = "pro"          # NEW
    TEAM = "team"
    ENTERPRISE = "enterprise"
```

### 2. Update Plan Limits

Update `packages/api/app/services/plan_limits_service.py`:

```python
PLAN_LIMITS = {
    "free": {"reports_per_month": 100, "projects": 2, "seats": 2, "retention_days": 7},
    "starter": {"reports_per_month": 1000, "projects": 5, "seats": 5, "retention_days": 30},
    "pro": {"reports_per_month": 5000, "projects": 15, "seats": 15, "retention_days": 90},
    "team": {"reports_per_month": 20000, "projects": -1, "seats": -1, "retention_days": 365},
    "enterprise": {"reports_per_month": -1, "projects": -1, "seats": -1, "retention_days": -1},
}
```

### 3. Update Feature Gates

```python
FEATURE_GATES = {
    "github_export": ["starter", "pro", "team", "enterprise"],
    "github_bidirectional": ["pro", "team", "enterprise"],
    "linear_export": ["pro", "team", "enterprise"],
    "jira_export": ["pro", "team", "enterprise"],
    "slack_basic": ["starter", "pro", "team", "enterprise"],
    "slack_full": ["pro", "team", "enterprise"],
    "discord": ["pro", "team", "enterprise"],
    "ai_auto_triage_basic": ["starter", "pro", "team", "enterprise"],
    "ai_auto_triage_full": ["pro", "team", "enterprise"],
    "ai_analysis": ["starter", "pro", "team", "enterprise"],  # with different limits
    "ai_chat": ["team", "enterprise"],
    "session_replay_30s": ["starter", "pro", "team", "enterprise"],
    "session_replay_2min": ["pro", "team", "enterprise"],
    "session_replay_5min": ["team", "enterprise"],
    "custom_fields": ["pro", "team", "enterprise"],
    "custom_branding": ["team", "enterprise"],
    "webhooks": ["starter", "pro", "team", "enterprise"],
    "browser_extension": ["free", "starter", "pro", "team", "enterprise"],
    "sso": ["enterprise"],
    "audit_log": ["enterprise"],
}
```

### 4. Update Dashboard Pricing Page

Update `packages/dashboard/src/components/landing/pricing-data.ts` with 4 tiers + enterprise.

### 5. Create Alembic Migration

Add "pro" to the Plan enum in PostgreSQL:

```python
def upgrade():
    op.execute("ALTER TYPE plan ADD VALUE IF NOT EXISTS 'pro' AFTER 'starter'")
```

### 6. Update All Plan Checks

Search codebase for all plan comparisons and update:

```python
# Before:
if user.plan in ("team", "enterprise"):

# After (where Pro should also have access):
if user.plan in ("pro", "team", "enterprise"):
```

## Implementation Steps

1. Add "pro" to Plan enum in model
2. Create Alembic migration for new enum value
3. Update plan limits dictionary
4. Update feature gates dictionary
5. Search and update all plan checks across routers
6. Update pricing-data.ts with new tiers
7. Add i18n keys for Pro plan text
8. Update Starter/Team pricing values
9. Update Free plan limits
10. Update admin panel to allow setting Pro plan
11. Update landing page pricing comparison table

## Tests to Update

- All existing plan-gated tests need to include Pro plan scenarios
- `test_pro_plan_has_correct_limits`
- `test_pro_plan_feature_access`
- `test_plan_upgrade_path` (free→starter→pro→team→enterprise)
