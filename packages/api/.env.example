# =============================================================================
# BugSpark API â€” Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
# =============================================================================

# -- Environment --------------------------------------------------------------
# "development" | "staging" | "production"
# Non-development environments enforce stricter validation (JWT secret length,
# encryption key required, no localhost S3).
ENVIRONMENT=development

# -- Database -----------------------------------------------------------------
# PostgreSQL async connection string (asyncpg driver).
# Local: postgresql+asyncpg://bugspark:bugspark_dev@localhost:5432/bugspark
# Supabase/Neon: postgresql+asyncpg://user:pass@host:6543/postgres
DATABASE_URL=postgresql+asyncpg://bugspark:bugspark_dev@localhost:5432/bugspark

# -- Authentication (JWT) -----------------------------------------------------
# MUST be changed in production (min 32 characters).
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_SECRET=change-me-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# -- Encryption ---------------------------------------------------------------
# Fernet key for encrypting integration secrets at rest.
# Required in non-development environments.
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=

# -- S3-Compatible Storage (screenshots) --------------------------------------
# Local: MinIO at localhost:9000 (see docker-compose.yml)
# Production: Any S3-compatible service (AWS S3, Cloudflare R2, etc.)
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY=bugspark
S3_SECRET_KEY=bugspark_dev
S3_BUCKET_NAME=bugspark-uploads
S3_PUBLIC_URL=http://localhost:9000/bugspark-uploads

# -- CORS & Frontend ----------------------------------------------------------
# Comma-separated list of allowed origins for CORS.
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
# Optional regex for dynamic preview deployment origins.
# Example: Leave empty for single domain setup
CORS_ORIGIN_REGEX=
# Dashboard URL used for redirects and email links.
FRONTEND_URL=http://localhost:3000

# -- Cookies ------------------------------------------------------------------
# Set to true in production when serving over HTTPS.
COOKIE_SECURE=false
# "lax" for same-site deployments, "none" for cross-origin (requires COOKIE_SECURE=true).
COOKIE_SAMESITE=lax

# -- Superadmin Seed ----------------------------------------------------------
# If set, the app will create/update a superadmin user on startup.
SUPERADMIN_EMAIL=
SUPERADMIN_PASSWORD=

# -- AI Analysis (Anthropic) --------------------------------------------------
# Required for the AI bug analysis feature. Leave empty to disable.
ANTHROPIC_API_KEY=
AI_MODEL=claude-haiku-4-5-20251001

# -- Email (Resend) -----------------------------------------------------------
# Required for transactional emails. Leave empty to disable.
RESEND_API_KEY=
EMAIL_FROM_ADDRESS=BugSpark <noreply@bugspark.dev>

# -- Error Tracking (Sentry) --------------------------------------------------
# Optional. Leave empty to disable Sentry integration.
SENTRY_DSN=
