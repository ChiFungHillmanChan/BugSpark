# CLI 命令

BugSpark CLI 所有可用命令的完整參考。

## 全域選項

以下旗標適用於任何命令：

| 旗標 | 說明 |
|------|------|
| `--api-url <url>` | 覆寫此命令的 API URL |
| `-V, --version` | 顯示 CLI 版本 |
| `-h, --help` | 顯示任何命令的幫助資訊 |

---

## `bugspark login`

使用個人存取權杖驗證 CLI。

```bash
bugspark login
```

**運作方式：**

1. 提示輸入 API URL（或使用預設值）
2. 開啟瀏覽器到 PAT 建立頁面
3. 要求你貼上 `bsk_pat_...` 權杖
4. 透過 API 驗證權杖
5. 將憑證儲存到 `~/.bugspark/config.json`

**範例：**

```
$ bugspark login
? BugSpark API URL: https://api.bugspark.hillmanchan.com/api/v1
Opening browser to create a token...
? Paste your token: bsk_pat_a1b2c3d4...
✓ Logged in as Jane Doe (jane@example.com)
```

---

## `bugspark logout`

移除已儲存的憑證。

```bash
bugspark logout
```

刪除 `~/.bugspark/config.json` 並清除你的工作階段。

---

## `bugspark whoami`

查看你目前登入的身份。

```bash
bugspark whoami
```

**範例輸出：**

```
  Name:  Jane Doe
  Email: jane@example.com
  API:   https://api.bugspark.hillmanchan.com/api/v1
```

---

## `bugspark init`

互動式專案設定精靈。

```bash
bugspark init
```

**運作方式：**

1. 從 API 取得你的專案列表
2. 顯示列表讓你選擇，或建立新的專案
3. 顯示已填入真實 API Key 的 Widget 安裝程式碼

這是取得專案 Widget 程式碼最快的方法，無需開啟儀表板。

---

## `bugspark projects`

管理 BugSpark 專案。

### `bugspark projects list`

列出所有專案。

```bash
bugspark projects list
```

**範例輸出：**

```
Projects (2 total):
─────────────────────────────────────────────────────────────
  My Web App
  ID:  a1b2c3d4-e5f6-...
  Key: bsk_pub_abc...
  Created: 2025-12-01

  Mobile App
  ID:  f7e8d9c0-b1a2-...
  Key: bsk_pub_def...
  Created: 2026-01-15
─────────────────────────────────────────────────────────────
```

### `bugspark projects create`

建立新專案。

```bash
bugspark projects create
```

提示輸入：
- **專案名稱** — 例如「測試環境」
- **網域**（可選） — 例如 `staging.myapp.com`

**範例：**

```
$ bugspark projects create
? Project name: Staging Environment
? Domain (optional): staging.myapp.com
✓ Project created!
  ID:  new-uuid-here
  Key: bsk_pub_new_key...
```

### `bugspark projects delete`

透過 ID 刪除專案。

```bash
bugspark projects delete
```

提示輸入專案 ID，並在刪除前要求確認。

<Callout type="danger" title="破壞性操作">
  刪除專案會移除所有相關的錯誤報告。此操作無法撤銷。
</Callout>

---

## `bugspark reports`

管理錯誤報告。

### `bugspark reports list`

列出特定專案的近期錯誤報告。

```bash
bugspark reports list
```

提示輸入 **專案 ID**（可以從 `bugspark projects list` 複製）。

**範例輸出：**

```
Reports for project a1b2c3d4 (3 total):
─────────────────────────────────────────────────────────────
  #1  按鈕無法使用
  Severity: high | Status: open
  Created:  2026-02-01

  #2  手機版面破版
  Severity: medium | Status: in_progress
  Created:  2026-02-03

  #3  頁尾有錯字
  Severity: low | Status: resolved
  Created:  2026-02-05
─────────────────────────────────────────────────────────────
```

### `bugspark reports view`

查看單一報告的完整詳情。

```bash
bugspark reports view
```

提示輸入 **報告 ID**。顯示：

- 標題、描述、嚴重程度、狀態
- 回報者資訊和分類
- 主控台日誌、網路日誌和元資料
- 使用者操作時間軸

### `bugspark reports update`

更新報告的狀態或嚴重程度。

```bash
bugspark reports update
```

提示輸入：
- **報告 ID**
- **新狀態** — `open`、`in_progress`、`resolved`、`dismissed`
- **新嚴重程度** — `low`、`medium`、`high`、`critical`

兩者都是可選的；留空則跳過。

---

## 常見工作流程

### 設定全新專案

```bash
bugspark login            # 一次性設定
bugspark projects create  # 建立專案
bugspark init             # 取得 Widget 程式碼
```

### 從終端機處理錯誤

```bash
bugspark reports list     # 查看有什麼新報告
bugspark reports view     # 檢視特定報告
bugspark reports update   # 變更狀態 / 嚴重程度
```

### 在 CI/CD 中使用

你可以在自動化流程中透過設定檔使用 CLI：

```bash
# 在你的 CI 腳本中
mkdir -p ~/.bugspark
echo '{"apiUrl":"https://api.bugspark.hillmanchan.com/api/v1","token":"bsk_pat_YOUR_TOKEN"}' > ~/.bugspark/config.json
chmod 600 ~/.bugspark/config.json

# 現在 CLI 命令可以非互動式運作
bugspark projects list
bugspark reports list
```

<Callout type="warning" title="CI/CD 安全性">
  將你的 PAT 儲存為 CI 提供者的秘密環境變數（例如 GitHub Actions secret）。絕對不要將權杖提交到程式碼庫中。
</Callout>

---

## 下一步

- [CLI 身份驗證](/docs/cli/authentication) — PAT 的運作原理
- [API 參考](/docs/api/authentication) — 直接使用 REST API
- [Widget 設定](/docs/widget/configuration) — 自訂 Widget
